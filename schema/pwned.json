{
    "definitions": {
        "sha264": {
            "type": "string",
            "pattern": "^[a-z0-9]{64}$"
        },
        "stub": {
            "type": "string",
            "pattern": "[a-z0-9]{6}"
        },
        "hash_item": {
            "type": "object",
            "properties": {
                "hash": {"$ref": "#/definitions/sha264"},
                "count": {"type": "integer", "minimum":1}
            },
            "required": ["hash", "count"],
            "additionalProperties": false
        }
    },
    "oneOf": [
        {
            "type":"object",
            "description": "Api message request",
            "properties": {
                "msg_type": {
                    "enum": ["request"]
                },
                "hash": {"$ref": "#/definitions/stub"}
            },
            "required" : ["hash", "msg_type"],
            "additionalProperties": false
        },
        {
            "type":"object",
            "description": "Api message response with data",
            "properties": {
                "msg_type": {
                    "enum": ["response"]
                },
                "status" : {
                    "enum": ["SUCCESS"]
                },
                "data": {
                    "type": "array",
                    "items": {"$ref": "#/definitions/hash_item"},
                    "minItems": 1
                },
                "hash": {"$ref": "#/definitions/sha264"}
            },
            "required": ["status", "msg_type", "data"],
            "additionalProperties": false
        },
        {
            "type":"object",
            "description": "Api message response hash not found",
            "properties": {
                "msg_type": {
                    "enum": ["response"]
                },
                "status" : {
                    "enum": ["NO_QUERY"]
                }
            },
            "required": ["status", "msg_type"],
            "additionalProperties": false
        }
    ]

}